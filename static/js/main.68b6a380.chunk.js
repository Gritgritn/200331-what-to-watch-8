(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(27),s=a.n(r),i=a(2),l=a(8),o=a(7),d="All genres",u=/\d/,j=/[A-za-z]/,m="wtw-token",b=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,f=function(){return"/"},O=function(){return"/login"},v=function(){return"/mylist"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id";return Object(o.f)("/films/:id",{id:e})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id";return Object(o.f)("/films/:id/review",{id:e})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id";return Object(o.f)("/player/:id",{id:e})},_=function(){return"/404"},g=1,N=0,y="BIG",w="SMALL",k="AUTH",F="NOT_AUTH",C="UNKNOWN",S={Overview:"overview",Details:"details",Reviews:"reviews"},E={Bad:"Bad",Normal:"Normal",Good:"Good",VeryGood:"Very Good",Awesome:"Awesome"},T={Bad:0,Normal:3,Good:5,VeryGood:8,Awesome:10},M="GUEST",I="PRIVATE",D="filter/setFilter",A="authorization/setStatus",P="authorization/setInfo",L="allFilms/setData",R="allFilms/setFetchStatus",z="promoFilm/setData",G="promoFilm/setFetchStatus",H="favoriteFilms/setData",B="favoriteFilms/setFetchStatus",W="similarFilms/setData",U="similarFilms/setFetchStatus",Y="currentFilm/setData",q="currentFilm/setFetchStatus",V="authorization/setError",J="currentComments/setData",Z="currentComments/setFetchStatus",K="newComment/setFetchStatus",X="app/redirect",$=function(){return"/films"},Q=function(){return"/promo"},ee=function(e){return"/films/".concat(e)},te=function(e){return"/films/".concat(e,"/similar")},ae=function(){return"/favorite"},ce=function(e,t){return"/favorite/".concat(e,"/").concat(t)},ne=function(e){return"/comments/".concat(e)},re=function(){return"/login"},se=function(){return"/logout"},ie="IDLE",le="LOADING",oe="SUCCEEDED",de="FAILED",ue=1,je=10,me=50,be=400,fe=a(0);var Oe=function(e){var t=e.src,a=e.alt;return Object(fe.jsx)("div",{className:"film-card__bg",children:Object(fe.jsx)("img",{src:t,alt:a})})},ve=a(10),he=a(6),xe=a(9),pe=a.n(xe),_e="logo__link";var ge=function(e){var t=e.IsFooter,a=pe()(_e,Object(ve.a)({},"".concat(_e,"--light"),t));return Object(fe.jsx)("div",{className:"logo",children:Object(fe.jsxs)(he.a,{to:"/",className:a,"data-testid":"logo-link",children:[Object(fe.jsx)("span",{className:"logo__letter logo__letter--1",children:"W"}),Object(fe.jsx)("span",{className:"logo__letter logo__letter--2",children:"T"}),Object(fe.jsx)("span",{className:"logo__letter logo__letter--3",children:"W"})]})})},Ne=a(5),ye=a.n(Ne),we=a(11),ke=a(20),Fe=a(17),Ce=a(36),Se=a.n(Ce),Ee=a(21),Te=a.n(Ee),Me=function(e){var t={};return Object.entries(e).forEach((function(e){var a=Object(l.a)(e,2),c=a[0],n=a[1];t[Se()(c)]=n})),t.actors=e.starring,delete t.starring,t},Ie=function(e){var t={};return Object.entries(e).forEach((function(e){var a=Object(l.a)(e,2),c=a[0],n=a[1];t[Se()(c)]=n})),t},De=function(e){return Object(Fe.a)(Object(Fe.a)({},e),{},{date:Te()(e.date).toDate()})},Ae=function(){localStorage.removeItem(m)},Pe=a(3),Le=Object(Pe.b)(X,(function(e){return{payload:{route:e}}})),Re=Object(Pe.b)(A,(function(e){return{payload:{status:e}}})),ze=Object(Pe.b)(V,(function(e){return{payload:{errorMessage:e}}})),Ge=Object(Pe.b)(P,(function(e){return{payload:{info:e}}})),He=Object(Pe.b)(V,(function(){return{payload:{errorMessage:""}}})),Be=Object(Pe.b)(L,(function(e){return{payload:{allFilms:e}}})),We=Object(Pe.b)(R,(function(e){return{payload:{status:e}}})),Ue=Object(Pe.b)(z,(function(e){return{payload:{promoFilm:e}}})),Ye=Object(Pe.b)(G,(function(e){return{payload:{status:e}}})),qe=Object(Pe.b)(H,(function(e){return{payload:{favoriteFilms:e}}})),Ve=Object(Pe.b)(B,(function(e){return{payload:{status:e}}})),Je=Object(Pe.b)(W,(function(e){return{payload:{similarFilms:e}}})),Ze=Object(Pe.b)(U,(function(e){return{payload:{status:e}}})),Ke=Object(Pe.b)(Y,(function(e){return{payload:{currentFilm:e}}})),Xe=Object(Pe.b)(q,(function(e){return{payload:{status:e}}})),$e=function(e){return e.authorization.status},Qe=function(e){var t;return null===(t=e.authorization.info)||void 0===t?void 0:t.avatarUrl},et=function(e){return e.authorization.errorMessage},tt={position:"fixed",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},at={margin:"auto",background:"transparent",display:"block",shapeRendering:"auto"},ct={minHeight:63};var nt=function(){var e=Object(i.c)($e),t=Object(i.c)(Qe),a=Object(i.b)(),c=function(){a(function(){var e=Object(we.a)(ye.a.mark((function e(t,a,c){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.delete(se());case 3:Ae(),t(Ge(null)),t(Re(F)),t(Ye(ie)),t(Xe(ie)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),ke.b.error("Logout is falied");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,c){return e.apply(this,arguments)}}())};return Object(fe.jsx)("ul",{className:"user-block",style:ct,children:e===k?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("li",{className:"user-block__item",children:Object(fe.jsx)(he.a,{to:v(),children:Object(fe.jsx)("div",{className:"user-block__avatar",children:Object(fe.jsx)("img",{src:t,alt:"User avatar",width:"63",height:"63"})})})}),Object(fe.jsx)("li",{className:"user-block__item",children:Object(fe.jsx)("span",{className:"user-block__link",onClick:function(){return c()},children:"Sign out"})})]}):Object(fe.jsx)("li",{className:"user-block__item",children:Object(fe.jsx)(he.a,{to:O(),className:"user-block__link",children:"Sign In"})})})},rt="film-card__poster";var st=function(e){var t=e.src,a=e.alt,c=e.size,n="";c===w&&(n="".concat(rt,"--small")),c===y&&(n="".concat(rt,"--big"));var r="".concat(rt," ").concat(n);return Object(fe.jsx)("div",{className:r,"data-testid":"film-card-poster-container",children:Object(fe.jsx)("img",{src:t,alt:a,width:"218",height:"327","data-testid":"film-card-poster"})})},it=function(e){return function(){var t=Object(we.a)(ye.a.mark((function t(a,c,n){var r,s,i;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Xe(le)),t.prev=1,t.next=4,n.get(ee(e));case 4:r=t.sent,s=r.data,i=Me(s),a(Ke(i)),a(Xe(oe)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(Xe(de));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a,c){return t.apply(this,arguments)}}()};var lt=function(e){var t=e.film,a=e.isFilmFavorite,c=e.withAddReview,n=Object(i.c)($e),r=Object(i.b)();return Object(fe.jsxs)("div",{className:"film-card__buttons",children:[Object(fe.jsxs)(he.a,{to:p(t.id),className:"btn btn--play film-card__button",type:"button",children:[Object(fe.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(fe.jsx)("use",{xlinkHref:"#play-s"})}),Object(fe.jsx)("span",{children:"Play"})]}),Object(fe.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(){var e,c,n=a?N:g;r((e=t.id,c=n,function(){var t=Object(we.a)(ye.a.mark((function t(a,n,r){var s,i,l,o,d;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.post(ce(e,c));case 3:l=t.sent,o=l.data,d=Me(o),(null===(s=n().films.promoFilm.data)||void 0===s?void 0:s.id)===d.id&&a(Ue(d)),(null===(i=n().films.currentFilm.data)||void 0===i?void 0:i.id)===d.id&&a(Ke(d)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),ke.b.error("Favorite status was not changed");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a,c){return t.apply(this,arguments)}}()))},children:[Object(fe.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(fe.jsx)("use",{xlinkHref:a?"#in-list":"#add"})}),Object(fe.jsx)("span",{children:"My list"})]}),c&&n===k&&Object(fe.jsx)(he.a,{to:x(t.id),className:"btn film-card__button",type:"button",children:Object(fe.jsx)("span",{children:"Add review"})})]})};var ot=function(e){var t=e.className,a=e.children,c=e.IsHidden,n=void 0!==c&&c;return Object(fe.jsx)("h1",{className:pe()(n?"visually-hidden":"page-title",t),"data-testid":"page-title",children:a})};var dt=function(e){var t=e.className,a=e.children;return Object(fe.jsx)("header",{className:pe()("page-header",t),"data-testid":"page-header",children:a})};function ut(e){var t=e.film;return Object(fe.jsxs)("section",{className:"film-card",children:[Object(fe.jsx)(Oe,{src:t.backgroundImage,alt:t.name}),Object(fe.jsx)(ot,{IsHidden:!0,children:"WTW"}),Object(fe.jsxs)(dt,{className:"film-card__head",children:[Object(fe.jsx)(ge,{}),Object(fe.jsx)(nt,{})]}),Object(fe.jsx)("div",{className:"film-card__wrap",children:Object(fe.jsxs)("div",{className:"film-card__info",children:[Object(fe.jsx)(st,{src:t.posterImage,alt:"".concat(t.name," poster")}),Object(fe.jsxs)("div",{className:"film-card__desc",children:[Object(fe.jsx)("h2",{className:"film-card__title","data-testid":"film-card-title",children:t.name}),Object(fe.jsxs)("p",{className:"film-card__meta",children:[Object(fe.jsx)("span",{className:"film-card__genre","data-testid":"film-card-genre",children:t.genre}),Object(fe.jsx)("span",{className:"film-card__year","data-testid":"film-card-year",children:t.released})]}),Object(fe.jsx)(lt,{isFilmFavorite:t.isFavorite,film:t})]})]})})]})}var jt=Object(c.memo)(ut);var mt=function(e){var t=e.children;return Object(fe.jsx)("div",{className:"page-content",children:t})},bt="catalog";var ft=function(e){var t=e.title,a=e.hiddenTitle,c=e.likeThis,n=e.children,r=pe()(bt,Object(ve.a)({},"".concat(bt,"--like-this"),c)),s=pe()("catalog__title",{"visually-hidden":!t});return Object(fe.jsxs)("section",{className:r,"data-testid":"catalog-container",children:[Object(fe.jsx)("h2",{className:s,"data-testid":"catalog-title",children:a||t}),n]})},Ot="catalog__genres-item";var vt=function(e){var t=e.genres,a=e.activeGenre,c=e.setActiveGenre,n=function(e){e.preventDefault();var t=e.currentTarget.dataset.value;c(t)};return Object(fe.jsx)("ul",{className:"catalog__genres-list",children:t.map((function(e){var t=pe()(Ot,Object(ve.a)({},"".concat(Ot,"--active"),e===a));return Object(fe.jsx)("li",{className:t,"data-testid":e===a?"genre-tab-item-active":"genre-tab-item",children:Object(fe.jsx)("a",{href:"#genre",className:"catalog__genres-link","data-value":e,onClick:n,"data-testid":"genre-tab-link",children:e})},e)}))})};var ht=function(e){var t=e.src,a=e.poster;return Object(fe.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(fe.jsx)("video",{src:t,autoPlay:!0,muted:!0,poster:a,width:"280",height:"175",style:{objectFit:"cover"},"data-testid":"small-film-card-video-preview"})})};var xt=function(e){var t=e.src,a=e.alt,c=void 0===a?"":a;return Object(fe.jsx)("div",{className:"small-film-card__image",children:Object(fe.jsx)("img",{src:t,alt:c,width:"280",height:"175","data-testid":"small-film-card-image-preview"})})};function pt(e){var t=e.film,a=e.className,n=Object(c.useRef)(null),r=Object(c.useState)(!1),s=Object(l.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),j=u[0],m=u[1],b=function(){n.current&&(clearTimeout(n.current),n.current=null)};return Object(c.useEffect)((function(){return b(),n.current=setTimeout((function(){m(!(!i&&j))}),1e3),b}),[j,i]),Object(fe.jsx)("article",{className:pe()("small-film-card",a),onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},"data-testid":"small-film-card",children:Object(fe.jsxs)(he.a,{to:h(t.id),style:{color:"inherit"},children:[i?Object(fe.jsx)(ht,{src:t.previewVideoLink,poster:t.previewImage}):Object(fe.jsx)(xt,{src:t.previewImage,alt:t.name}),Object(fe.jsx)("h3",{className:"small-film-card__title","data-testid":"small-card-title",children:Object(fe.jsx)("span",{className:"small-film-card__link",children:t.name})})]})})}var _t=Object(c.memo)(pt);var gt=function(e){var t=e.films;return Object(fe.jsx)("div",{className:"catalog__films-list",children:t.map((function(e){return Object(fe.jsx)(_t,{film:e,className:"catalog__films-card"},e.id)}))})};var Nt=function(e){var t=e.onClick;return Object(fe.jsx)("div",{className:"catalog__more",children:Object(fe.jsx)("button",{className:"catalog__button",type:"button",onClick:t,children:"Show more"})})};var yt=function(){return Object(fe.jsxs)("footer",{className:"page-footer",children:[Object(fe.jsx)(ge,{IsFooter:!0}),Object(fe.jsx)("div",{className:"copyright",children:Object(fe.jsx)("p",{children:"\xa9 2019 What to watch Ltd."})})]})};var wt=function(e){var t=e.children;return Object(fe.jsx)("div",{className:"page-content",style:tt,children:t})};var kt=function(){return Object(fe.jsxs)(wt,{children:[Object(fe.jsx)(ot,{children:"Loading screen"}),Object(fe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:at,width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(fe.jsx)("rect",{x:"15",y:"30",width:"10",height:"40",fill:"#df5127",children:Object(fe.jsx)("animate",{attributeName:"opacity",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1",values:"1;0.2;1",begin:"-0.6"})}),Object(fe.jsx)("rect",{x:"35",y:"30",width:"10",height:"40",fill:"#e06a45",children:Object(fe.jsx)("animate",{attributeName:"opacity",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1",values:"1;0.2;1",begin:"-0.4"})}),Object(fe.jsx)("rect",{x:"55",y:"30",width:"10",height:"40",fill:"#df9984",children:Object(fe.jsx)("animate",{attributeName:"opacity",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1",values:"1;0.2;1",begin:"-0.2"})}),Object(fe.jsx)("rect",{x:"75",y:"30",width:"10",height:"40",fill:"#d6b1a6",children:Object(fe.jsx)("animate",{attributeName:"opacity",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1",values:"1;0.2;1",begin:"-1"})})]})]})};var Ft=function(){return Object(fe.jsxs)(wt,{children:[Object(fe.jsx)(ot,{children:"This page does not exist"}),Object(fe.jsx)("p",{children:Object(fe.jsx)(he.a,{to:f(),style:{color:"inherit",textDecoration:"none"},children:"Go to main page"})})]})},Ct=a(29),St=a(19),Et=function(e){return e.filter},Tt=function(e){return e.films.allFilms.data},Mt=function(e){return e.films.promoFilm.data},It=function(e){return e.films.similarFilms.data},Dt=function(e){return e.films.favoriteFilms.data},At=function(e){return e.films.currentFilm.data},Pt=function(e){return e.films.allFilms.status},Lt=function(e){return e.films.promoFilm.status},Rt=function(e){return e.films.similarFilms.status},zt=function(e){return e.films.favoriteFilms.status},Gt=function(e){return e.films.currentFilm.status},Ht=Object(St.a)([Tt,Et],(function(e,t){return e?t&&t!==d?e.filter((function(e){return e.genre===t})):Object(Ct.a)(e):[]})),Bt=Object(St.a)([Tt],(function(e){if(!e)return[];var t=new Set;return e.forEach((function(e){return t.add(e.genre)})),[d].concat(Object(Ct.a)(Array.from(t).slice(0,9)))})),Wt=Object(Pe.b)(D,(function(e){return{payload:{filter:e}}})),Ut=function(e){return e===ie},Yt=function(e){return e===ie||e===le},qt=function(e){return e===de},Vt=function(e){return e===oe};var Jt=function(){var e=Object(i.c)(Pt),t=Object(i.c)(Lt),a=Object(i.c)(Et),n=Object(i.c)(Bt),r=Object(i.c)(Ht),s=Object(i.c)(Mt),o=Object(i.b)(),d=function(){o(function(){var e=Object(we.a)(ye.a.mark((function e(t,a,c){var n,r,s;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(We(le)),e.prev=1,e.next=4,c.get($());case 4:n=e.sent,r=n.data,s=r.map((function(e){return Me(e)})),t(Be(s)),t(We(oe)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(We(de));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,c){return e.apply(this,arguments)}}())},u=function(){o(function(){var e=Object(we.a)(ye.a.mark((function e(t,a,c){var n,r,s;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ye(le)),e.prev=1,e.next=4,c.get(Q());case 4:n=e.sent,r=n.data,s=Me(r),t(Ue(s)),t(Ye(oe)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(Ye(de));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,c){return e.apply(this,arguments)}}())},j=Object(c.useCallback)((function(e){o(Wt(e))}),[o]),m=Object(c.useCallback)((function(){v((function(e){return e+1}))}),[]),b=Object(c.useState)(1),f=Object(l.a)(b,2),O=f[0],v=f[1];if(Object(c.useEffect)((function(){Ut(e)&&d(),Ut(t)&&u()}),[e,t]),Object(c.useEffect)((function(){v(1)}),[a]),Yt(e)||Yt(t))return Object(fe.jsx)(kt,{});if(qt(e)||qt(t)||!s)return Object(fe.jsx)(Ft,{});var h=r.slice(0,8*O),x=r.length>h.length;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(jt,{film:s}),Object(fe.jsxs)(mt,{children:[Object(fe.jsxs)(ft,{hiddenTitle:"Catalog",children:[Object(fe.jsx)(vt,{genres:n,activeGenre:a,setActiveGenre:j}),Object(fe.jsx)(gt,{films:h}),x&&Object(fe.jsx)(Nt,{onClick:m})]}),Object(fe.jsx)(yt,{})]})]})},Zt=Object(Pe.b)(J,(function(e){return{payload:{currentComments:e}}})),Kt=Object(Pe.b)(Z,(function(e){return{payload:{status:e}}})),Xt=Object(Pe.b)(K,(function(e){return{payload:{status:e}}})),$t=function(){var e=Object(o.i)().id;if(!e)return{error:new Error("Id param does not exist")};var t=Number(e);return Number.isNaN(t)?{error:new Error("Id is not valid")}:{id:t}},Qt=a(33),ea=a.n(Qt),ta="film-nav__item";var aa=function(e){var t=e.className,a=Object(o.h)(),c=pe()("film-nav",t);return Object(fe.jsx)("nav",{className:c,"data-testid":"film-card-navigation",children:Object(fe.jsx)("ul",{className:"film-nav__list",children:Object.values(S).map((function(e){var t=pe()(ta,Object(ve.a)({},"".concat(ta,"--active"),a.hash.slice(1)===e)),c="".concat(a.pathname,"#").concat(e);return Object(fe.jsx)("li",{className:t,children:Object(fe.jsx)(he.a,{to:c,className:"film-nav__link",children:ea()(e)})},e)}))})})},ca=a(50),na=function(e){var t=String(e).replace(".",",");return 1===t.length?"".concat(t,",0"):t},ra=function(e){var t=e.slice(0,4).join(", ");return e.length>4?"".concat(t," and others"):t},sa=function(e){var t,a=Object.keys(E).reverse(),c=Object(ca.a)(a);try{for(c.s();!(t=c.n()).done;){var n=t.value;if(e>=T[n])return E[n]}}catch(r){c.e(r)}finally{c.f()}return E.Bad};var ia=function(e){var t=e.film;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{className:"film-rating",children:[Object(fe.jsx)("div",{className:"film-rating__score","data-testid":"film-overview-rating",children:na(t.rating)}),Object(fe.jsxs)("p",{className:"film-rating__meta",children:[Object(fe.jsx)("span",{className:"film-rating__level",children:sa(t.rating)}),Object(fe.jsxs)("span",{className:"film-rating__count","data-testid":"film-overview-scores-count",children:[t.scoresCount," ratings"]})]})]}),Object(fe.jsxs)("div",{className:"film-card__text",children:[Object(fe.jsx)("p",{"data-testid":"film-overview-description",children:t.description}),Object(fe.jsx)("p",{className:"film-card__director","data-testid":"film-overview-director",children:Object(fe.jsxs)("strong",{children:["Director: ",t.director]})}),Object(fe.jsx)("p",{className:"film-card__starring","data-testid":"film-overview-actors",children:Object(fe.jsxs)("strong",{children:["Starring: ",ra(t.actors)]})})]})]})},la=a(51),oa=a.n(la);Te.a.extend(oa.a);var da=function(e){return Te()(e).format("MMMM D, YYYY")};var ua=function(e){var t,a=e.film,n=a.actors.map((function(e,t,a){var n="".concat(e,"-").concat(t),r=t<a.length-1;return Object(fe.jsxs)(c.Fragment,{children:[e,r&&Object(fe.jsx)("br",{})]},n)}));return Object(fe.jsxs)("div",{className:"film-card__text film-card__row",children:[Object(fe.jsxs)("div",{className:"film-card__text-col",children:[Object(fe.jsxs)("p",{className:"film-card__details-item",children:[Object(fe.jsx)("strong",{className:"film-card__details-name",children:"Director"}),Object(fe.jsx)("span",{className:"film-card__details-value","data-testid":"film-card-director",children:a.director})]}),Object(fe.jsxs)("p",{className:"film-card__details-item",children:[Object(fe.jsx)("strong",{className:"film-card__details-name",children:"Starring"}),n]})]}),Object(fe.jsxs)("div",{className:"film-card__text-col",children:[Object(fe.jsxs)("p",{className:"film-card__details-item",children:[Object(fe.jsx)("strong",{className:"film-card__details-name",children:"Run Time"}),Object(fe.jsx)("span",{className:"film-card__details-value","data-testid":"film-card-run-time",children:(t=a.runTime,Te.a.duration(t,"minutes").format("H[h] mm[m]"))})]}),Object(fe.jsxs)("p",{className:"film-card__details-item",children:[Object(fe.jsx)("strong",{className:"film-card__details-name",children:"Genre"}),Object(fe.jsx)("span",{className:"film-card__details-value","data-testid":"film-card-genre",children:a.genre})]}),Object(fe.jsxs)("p",{className:"film-card__details-item",children:[Object(fe.jsx)("strong",{className:"film-card__details-name",children:"Released"}),Object(fe.jsx)("span",{className:"film-card__details-value","data-testid":"film-card-year",children:a.released})]})]})]})};var ja=function(e){var t,a=e.comment;return Object(fe.jsxs)("div",{className:"review","data-testid":"review",children:[Object(fe.jsxs)("blockquote",{className:"review__quote",children:[Object(fe.jsx)("p",{className:"review__text",children:a.comment}),Object(fe.jsxs)("footer",{className:"review__details",children:[Object(fe.jsx)("cite",{className:"review__author","data-testid":"comment-user-name",children:a.user.name}),Object(fe.jsx)("time",{className:"review__date",dateTime:(t=a.date,Te()(t).format("YYYY-MM-DD")),"data-testid":"comment-date",children:da(a.date)})]})]}),Object(fe.jsx)("div",{className:"review__rating","data-testid":"comment-rating",children:na(a.rating)})]})};var ma=function(e){var t=function(e){var t=Math.ceil(e.length/2);return[e.slice(0,t),e.slice(t)]}(e.comments.map((function(e){return Object(fe.jsx)(ja,{comment:e},e.id)}))),a=Object(l.a)(t,2),c=a[0],n=a[1];return Object(fe.jsxs)("div",{className:"film-card__reviews film-card__row",children:[Object(fe.jsx)("div",{className:"film-card__reviews-col",children:c}),Object(fe.jsx)("div",{className:"film-card__reviews-col",children:n})]})};var ba=function(e){var t,a=e.film,c=e.comments,n=Object(o.h)(),r=n.hash.slice(1);if(!Object.values(S).some((function(e){return e===r})))return Object(fe.jsx)(o.a,{to:"".concat(n.pathname,"#").concat(S.Overview)});var s=r,i=(t={},Object(ve.a)(t,S.Details,Object(fe.jsx)(ua,{film:a})),Object(ve.a)(t,S.Overview,Object(fe.jsx)(ia,{film:a})),Object(ve.a)(t,S.Reviews,Object(fe.jsx)(ma,{comments:c})),t);return Object(fe.jsxs)("section",{className:"film-card film-card--full",style:{backgroundColor:a.backgroundColor},children:[Object(fe.jsxs)("div",{className:"film-card__hero",children:[Object(fe.jsx)(Oe,{src:a.backgroundImage,alt:a.name}),Object(fe.jsx)(ot,{IsHidden:!0,children:"WTW"}),Object(fe.jsxs)(dt,{className:"film-card__head",children:[Object(fe.jsx)(ge,{}),Object(fe.jsx)(nt,{})]}),Object(fe.jsx)("div",{className:"film-card__wrap",children:Object(fe.jsxs)("div",{className:"film-card__desc",children:[Object(fe.jsx)("h2",{className:"film-card__title",children:a.name}),Object(fe.jsxs)("p",{className:"film-card__meta",children:[Object(fe.jsx)("span",{className:"film-card__genre",children:a.genre}),Object(fe.jsx)("span",{className:"film-card__year",children:a.released})]}),Object(fe.jsx)(lt,{isFilmFavorite:a.isFavorite,withAddReview:!0,film:a})]})})]}),Object(fe.jsx)("div",{className:"film-card__wrap film-card__translate-top",children:Object(fe.jsxs)("div",{className:"film-card__info",children:[Object(fe.jsx)(st,{src:a.posterImage,alt:"".concat(a.name," poster"),size:y}),Object(fe.jsxs)("div",{className:"film-card__desc",children:[Object(fe.jsx)(aa,{className:"film-card__nav"}),i[s]]})]})})]})},fa=function(e){return e.comments.currentComments.data},Oa=function(e){return e.comments.currentComments.status},va=Object(St.a)((function(e){return e.comments.newComment.status}),(function(e){return e===le}));var ha=function(){var e=$t(),t=e.id,a=e.error,n=Object(i.c)(At),r=Object(i.c)(fa),s=Object(i.c)(It),d=Object(i.c)(Gt),u=Object(i.c)(Oa),j=Object(i.c)(Rt),m=Object(c.useState)(ie),b=Object(l.a)(m,2),f=b[0],O=b[1],v=Object(c.useRef)(f),h=Object(i.b)(),x=function(e){h(it(e))},p=function(e){h(function(e){return function(){var t=Object(we.a)(ye.a.mark((function t(a,c,n){var r,s,i;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Kt(le)),t.prev=1,t.next=4,n.get(ne(e));case 4:r=t.sent,s=r.data,i=s.map((function(e){return De(e)})),a(Zt(i)),a(Kt(oe)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(Kt(de));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a,c){return t.apply(this,arguments)}}()}(e))},g=function(e){h(function(e){return function(){var t=Object(we.a)(ye.a.mark((function t(a,c,n){var r,s,i;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Ze(le)),t.prev=1,t.next=4,n.get(te(e));case 4:r=t.sent,s=r.data,i=s.map((function(e){return Me(e)})),a(Je(i)),a(Ze(oe)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(Ze(de));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a,c){return t.apply(this,arguments)}}()}(e))};return Object(c.useEffect)((function(){if(t){if((null===n||void 0===n?void 0:n.id)!==t)return x(t),p(t),void g(t);Ut(d)&&x(t),Ut(u)&&p(t),Ut(j)&&g(t)}}),[null===n||void 0===n?void 0:n.id,t]),Object(c.useEffect)((function(){Yt(d)||Yt(u)||Yt(j)?O(le):qt(d)||qt(u)||qt(j)?O(de):O(oe)}),[d,u,j]),Object(c.useEffect)((function(){v.current=f}),[f]),Object(c.useEffect)((function(){return function(){Vt(v.current)||(h(Xe(ie)),h(Ze(ie)),h(Kt(ie)))}}),[]),a||qt(f)?Object(fe.jsx)(o.a,{to:_()}):Yt(f)?Object(fe.jsx)(kt,{}):n&&r&&s?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ba,{film:n,comments:r}),Object(fe.jsxs)(mt,{children:[Object(fe.jsx)(ft,{title:"More like this",likeThis:!0,children:Object(fe.jsx)(gt,{films:s.slice(0,4)})}),Object(fe.jsx)(yt,{})]})]}):Object(fe.jsx)(o.a,{to:_()})},xa=a(52),pa=a.n(xa);var _a=function(){var e=$t(),t=e.id,a=e.error,n=Object(i.c)(At),r=Object(i.c)(Gt),s=Object(c.useRef)(r),d=Object(i.b)();Object(c.useEffect)((function(){s.current=r}),[r]),Object(c.useEffect)((function(){t&&(null===n||void 0===n?void 0:n.id)!==t&&d(it(t))}),[null===n||void 0===n?void 0:n.id,t]),Object(c.useEffect)((function(){return function(){Vt(s.current)||d(Xe(ie))}}),[]);var u=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)(0),j=Object(l.a)(u,2),m=j[0],b=j[1],f=Object(c.useState)(0),O=Object(l.a)(f,2),v=O[0],h=O[1],x=Object(c.useState)(0),p=Object(l.a)(x,2),_=p[0],g=p[1],N=function(){var e=Object(we.a)(ye.a.mark((function e(t){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.play();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),d(!1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(n&&e.current){var t=Math.round(e.current.duration);b(t),g(t),d(!0)}}),[n]),Object(c.useEffect)((function(){if(e.current){var t=e.current;o?N(t):t.pause()}}),[o]),{ref:e,isPlay:o,isReady:n,duration:m,percentage:v,elapsedTime:_,togglePlay:function(){d((function(e){return!e}))},onLoadedData:function(){r(!0)},onTimeUpdate:function(){if(e.current){var t=e.current.currentTime/m*100,a=Math.round(m*(100-t)/100);h(t),g(a)}},onPlay:function(){d(!0)},onPause:function(){d(!1)},requestFullScreen:function(){e.current&&e.current.requestFullscreen()}}}(),j=u.ref,m=u.isPlay,b=u.isReady,f=u.duration,O=u.percentage,v=u.elapsedTime,x=u.togglePlay,p=u.onPlay,g=u.onPause,N=u.onLoadedData,y=u.onTimeUpdate,w=u.requestFullScreen;if(a||qt(r))return Object(fe.jsx)(o.a,{to:_()});if(Yt(r))return Object(fe.jsx)(kt,{});if(!n)return Object(fe.jsx)(o.a,{to:_()});var k="".concat(pa()(O,2),"%"),F=m?"#pause":"#play-s",C=b?function(e){var t=e>=3600?"-HH:mm:ss":"-mm:ss";return Te.a.duration(e,"seconds").format(t)}(v):"Loading...";return Object(fe.jsxs)("div",{className:"player",children:[!b&&Object(fe.jsx)(kt,{}),Object(fe.jsx)("video",{ref:j,src:n.videoLink,className:"player__video",poster:n.previewImage,onPlay:p,onPause:g,onTimeUpdate:y,onLoadedData:N,"data-testid":"video-player"}),Object(fe.jsx)(he.a,{to:h(t),className:"player__exit",style:{textDecoration:"none"},children:"Exit"}),Object(fe.jsxs)("div",{className:"player__controls",children:[Object(fe.jsxs)("div",{className:"player__controls-row",children:[Object(fe.jsxs)("div",{className:"player__time",children:[Object(fe.jsx)("progress",{className:"player__progress",value:f-v,max:f}),Object(fe.jsx)("div",{className:"player__toggler",style:{left:k},children:"Toggler"})]}),Object(fe.jsx)("div",{className:"player__time-value",children:C})]}),Object(fe.jsxs)("div",{className:"player__controls-row",children:[Object(fe.jsxs)("button",{type:"button",className:"player__play",onClick:function(){x()},disabled:!b,children:[Object(fe.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(fe.jsx)("use",{xlinkHref:F})}),Object(fe.jsx)("span",{children:"Play"})]}),Object(fe.jsx)("div",{className:"player__name",children:n.name}),Object(fe.jsxs)("button",{type:"button",className:"player__full-screen",onClick:function(){w()},disabled:!b,children:[Object(fe.jsx)("svg",{viewBox:"0 0 27 27",width:"27",height:"27",children:Object(fe.jsx)("use",{xlinkHref:"#full-screen"})}),Object(fe.jsx)("span",{children:"Full screen"})]})]})]})]})},ga={email:"",password:""},Na={email:!1,password:!1};var ya=function(e){var t=e.className,a=Object(i.c)(et),n=Object(c.useState)(ga),r=Object(l.a)(n,2),s=r[0],o=r[1],d=Object(c.useState)(Na),O=Object(l.a)(d,2),v=O[0],h=O[1],x=Object(c.useMemo)((function(){return v.email?(e=s.email)?b.test(e.toLowerCase())?"":"E-mail is invalid.":"E-mail is required.":"";var e}),[s.email,v.email]),p=Object(c.useMemo)((function(){return v.password?(e=s.password)?e.length<2?"Password must have at least ".concat(2," symbols."):u.test(e.toLowerCase())?j.test(e.toLowerCase())?e.includes(" ")?"Password can not contain  empty spaces.":"":"Password must contain at least one literal symbol.":"Password must contain at least one number.":"Password is required.":"";var e}),[s.password,v.password]),_=Object(c.useMemo)((function(){return"".concat(x," ").concat(p).trim()}),[x,p]),g=Object(i.b)(),N=function(e){g(function(e){return function(){var t=Object(we.a)(ye.a.mark((function t(a,c,n){var r,s,i;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(He()),t.prev=1,t.next=4,n.post(re(),e);case 4:r=t.sent,s=r.data,c=(i=Ie(s)).token,localStorage.setItem(m,c),a(Le(f())),a(Ge(i)),a(Re(k)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),a(ze(t.t0.message));case 16:case"end":return t.stop()}var c}),t,null,[[1,13]])})));return function(e,a,c){return t.apply(this,arguments)}}()}(e))},y=function(e){var t=e.target.name;h(Object(Fe.a)(Object(Fe.a)({},v),{},Object(ve.a)({},t,!0)))},w=function(e){var t=e.target,a=t.name,c=t.value;o(Object(Fe.a)(Object(Fe.a)({},s),{},Object(ve.a)({},a,c.trim())))};return Object(c.useEffect)((function(){a&&h(Na)}),[a]),Object(c.useEffect)((function(){_&&g(He())}),[_]),Object(fe.jsx)("div",{className:pe()("sign-in",t),"data-testid":"login-form-container",children:Object(fe.jsxs)("form",{action:"#",className:"sign-in__form",onSubmit:function(e){e.preventDefault(),v.email&&v.password?_||N(s):h({email:!0,password:!0})},"data-testid":"login-form",children:[Object(fe.jsxs)("div",{className:"sign-in__fields",children:[_&&Object(fe.jsx)("div",{className:"sign-in__message","data-testid":"validity-message",children:Object(fe.jsx)("p",{children:_})}),a&&Object(fe.jsx)("div",{className:"sign-in__message","data-testid":"server-message",children:Object(fe.jsx)("p",{children:a})}),Object(fe.jsxs)("div",{className:pe()("sign-in__field",{"sign-in__field--error":!!x}),children:[Object(fe.jsx)("input",{className:"sign-in__input",type:"text",placeholder:"Email address",name:"email",id:"user-email",value:s.email,onChange:w,onBlur:y,"data-testid":"email-input"}),Object(fe.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-email",children:"Email address"})]}),Object(fe.jsxs)("div",{className:pe()("sign-in__field",{"sign-in__field--error":!!p}),children:[Object(fe.jsx)("input",{className:"sign-in__input",type:"password",placeholder:"Password",name:"password",id:"user-password",value:s.password,onChange:w,onBlur:y,"data-testid":"password-input"}),Object(fe.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-password",children:"Password"})]})]}),Object(fe.jsx)("div",{className:"sign-in__submit",children:Object(fe.jsx)("button",{className:"sign-in__btn",type:"submit","data-testid":"submit-button",children:"Sign in"})})]})})};var wa=function(){return Object(fe.jsxs)("div",{className:"user-page",children:[Object(fe.jsxs)(dt,{className:"user-page__head",children:[Object(fe.jsx)(ge,{}),Object(fe.jsx)(ot,{IsHidden:!0,children:"WTW"})]}),Object(fe.jsx)(ya,{className:"user-page__content"}),Object(fe.jsx)(yt,{})]})};var ka=function(){var e=Object(i.c)(Dt),t=Object(i.c)(zt),a=Object(i.b)(),n=function(){a(function(){var e=Object(we.a)(ye.a.mark((function e(t,a,c){var n,r,s;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ve(le)),e.prev=1,e.next=4,c.get(ae());case 4:n=e.sent,r=n.data,s=r.map((function(e){return Me(e)})),t(qe(s)),t(Ve(oe)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(Ve(de));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,c){return e.apply(this,arguments)}}())};return Object(c.useEffect)((function(){n()}),[]),Yt(t)?Object(fe.jsx)(kt,{}):qt(t)||!e?Object(fe.jsx)(Ft,{}):Object(fe.jsxs)("div",{className:"user-page",children:[Object(fe.jsxs)(dt,{className:"user-page__head",children:[Object(fe.jsx)(ge,{}),Object(fe.jsx)(ot,{className:"user-page__title",children:"My list"}),Object(fe.jsx)(nt,{})]}),Object(fe.jsx)(ft,{hiddenTitle:"Catalog",children:Object(fe.jsx)(gt,{films:e})}),Object(fe.jsx)(yt,{})]})};var Fa=function(e){var t=e.film;return Object(fe.jsx)("nav",{className:"breadcrumbs",children:Object(fe.jsxs)("ul",{className:"breadcrumbs__list",children:[Object(fe.jsx)("li",{className:"breadcrumbs__item",children:Object(fe.jsx)(he.a,{to:h(t.id),className:"breadcrumbs__link","data-testid":"film-link",children:t.name})}),Object(fe.jsx)("li",{className:"breadcrumbs__item",children:Object(fe.jsx)(he.a,{to:x(t.id),className:"breadcrumbs__link",children:"Add review"})})]})})},Ca=0,Sa="";var Ea=function(){var e=$t().id,t=Object(c.useState)(Ca),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(Sa),o=Object(l.a)(s,2),d=o[0],u=o[1],j=Object(c.useState)(!1),m=Object(l.a)(j,2),b=m[0],f=m[1],O=Object(i.c)(va),v=Object(i.b)(),x=function(t){v(function(e,t){return function(){var a=Object(we.a)(ye.a.mark((function a(c,n,r){var s,i,l;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(Xt(le)),a.prev=1,a.next=4,r.post(ne(e),t);case 4:s=a.sent,i=s.data,l=i.map((function(e){return De(e)})),c(Zt(l)),c(Xt(oe)),c(Kt(oe)),c(Le(h(e))),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),ke.b.error("Failed to add review"),c(Xt(de));case 17:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e,t,c){return a.apply(this,arguments)}}()}(e,t))},p=Object(c.useMemo)((function(){return function(e){return e>=ue&&e<=je}(n)}),[n]),_=Object(c.useMemo)((function(){return(e=d).length>=me&&e.length<=be;var e}),[d]);Object(c.useEffect)((function(){f(p&&_)}),[p,_]);var g=function(e){r(Number(e.currentTarget.value))};return Object(fe.jsx)("div",{className:"add-review",children:Object(fe.jsxs)("form",{action:"#",className:"add-review__form",onSubmit:function(e){e.preventDefault(),x({rating:n,comment:d})},"data-testid":"form",children:[Object(fe.jsx)("div",{className:"rating",children:Object(fe.jsx)("div",{className:"rating__stars",children:new Array(je).fill(null).map((function(e,t){return t+1})).reverse().map((function(e){var t="star-".concat(e),a=e===n;return Object(fe.jsxs)(c.Fragment,{children:[Object(fe.jsx)("input",{id:t,className:"rating__input",type:"radio",name:"rating",value:e,checked:a,disabled:O,onChange:g}),Object(fe.jsxs)("label",{className:"rating__label",htmlFor:t,"data-testid":t,children:["Rating ",e]})]},e)}))})}),Object(fe.jsxs)("div",{className:"add-review__text",children:[Object(fe.jsx)("textarea",{id:"review-text",className:"add-review__textarea",name:"review-text",placeholder:"Review text",value:d,disabled:O,onChange:function(e){u(e.currentTarget.value)},"data-testid":"review-text"}),Object(fe.jsx)("div",{className:"add-review__submit",children:Object(fe.jsx)("button",{className:"add-review__btn",type:"submit",disabled:!b||O,"data-testid":"submit-button",children:"Post"})})]})]})})};var Ta=function(){var e=$t(),t=e.id,a=e.error,n=Object(i.c)(At),r=Object(i.c)(Gt),s=Object(c.useRef)(r),l=Object(i.b)();return Object(c.useEffect)((function(){t&&(null===n||void 0===n?void 0:n.id)!==t&&l(it(t))}),[null===n||void 0===n?void 0:n.id,t]),Object(c.useEffect)((function(){s.current=r}),[r]),Object(c.useEffect)((function(){return function(){Vt(s.current)||l(Xe(ie))}}),[]),a||qt(r)?Object(fe.jsx)(o.a,{to:_()}):Yt(r)?Object(fe.jsx)(kt,{}):n?Object(fe.jsxs)("section",{className:"film-card film-card--full",style:{backgroundColor:n.backgroundColor},children:[Object(fe.jsxs)("div",{className:"film-card__header",children:[Object(fe.jsx)(Oe,{src:n.backgroundImage,alt:n.name}),Object(fe.jsx)(ot,{IsHidden:!0,children:"WTW"}),Object(fe.jsxs)(dt,{children:[Object(fe.jsx)(ge,{}),Object(fe.jsx)(Fa,{film:n}),Object(fe.jsx)(nt,{})]}),Object(fe.jsx)(st,{src:n.posterImage,alt:"".concat(n.name," poster"),size:w})]}),Object(fe.jsx)(Ea,{})]}):Object(fe.jsx)(o.a,{to:_()})},Ma=a(54),Ia=["type"];var Da=function(e){var t=e.type,a=Object(Ma.a)(e,Ia),c=Object(i.c)($e);switch(t){case I:return Object(fe.jsx)(o.b,Object(Fe.a)(Object(Fe.a)({},a),{},{children:c===k?a.children:Object(fe.jsx)(o.a,{to:O()})}));case M:return Object(fe.jsx)(o.b,Object(Fe.a)(Object(Fe.a)({},a),{},{children:c===F?a.children:Object(fe.jsx)(o.a,{to:f()})}))}};var Aa=function(){return Object(i.c)($e)===C?Object(fe.jsx)(kt,{}):Object(fe.jsxs)(o.d,{children:[Object(fe.jsx)(o.b,{path:f(),exact:!0,children:Object(fe.jsx)(Jt,{})}),Object(fe.jsx)(o.b,{path:h(),exact:!0,children:Object(fe.jsx)(ha,{})}),Object(fe.jsx)(o.b,{path:p(),exact:!0,children:Object(fe.jsx)(_a,{})}),Object(fe.jsx)(Da,{path:O(),exact:!0,type:M,children:Object(fe.jsx)(wa,{})}),Object(fe.jsx)(Da,{path:v(),exact:!0,type:I,children:Object(fe.jsx)(ka,{})}),Object(fe.jsx)(Da,{path:x(),exact:!0,type:I,children:Object(fe.jsx)(Ta,{})}),Object(fe.jsx)(o.b,{path:_(),exact:!0,children:Object(fe.jsx)(Ft,{})}),Object(fe.jsx)(o.b,{children:Object(fe.jsx)(o.a,{to:_()})})]})},Pa=a(13),La=Object(Pa.a)(),Ra=a(53),za=a.n(Ra),Ga=function(e){return function(e){return function(t){return t.type===X&&La.push(t.payload.route),e(t)}}},Ha=a(15),Ba={allFilms:{data:null,status:ie},promoFilm:{data:null,status:ie},currentFilm:{data:null,status:ie},similarFilms:{data:null,status:ie},favoriteFilms:{data:null,status:ie}},Wa=Object(Pe.c)(Ba,(function(e){e.addCase(Be,(function(e,t){e.allFilms.data=t.payload.allFilms})).addCase(We,(function(e,t){e.allFilms.status=t.payload.status})).addCase(Ue,(function(e,t){e.promoFilm.data=t.payload.promoFilm})).addCase(Ye,(function(e,t){e.promoFilm.status=t.payload.status})).addCase(qe,(function(e,t){e.favoriteFilms.data=t.payload.favoriteFilms})).addCase(Ve,(function(e,t){e.favoriteFilms.status=t.payload.status})).addCase(Je,(function(e,t){e.similarFilms.data=t.payload.similarFilms})).addCase(Ze,(function(e,t){e.similarFilms.status=t.payload.status})).addCase(Ke,(function(e,t){e.currentFilm.data=t.payload.currentFilm})).addCase(Xe,(function(e,t){e.currentFilm.status=t.payload.status}))})),Ua={status:C,info:null,errorMessage:""},Ya=Object(Pe.c)(Ua,(function(e){e.addCase(Ge,(function(e,t){e.info=t.payload.info})).addCase(Re,(function(e,t){e.status=t.payload.status})).addCase(ze,(function(e,t){e.errorMessage=t.payload.errorMessage}))})),qa={currentComments:{data:null,status:ie},newComment:{status:ie}},Va=Object(Pe.c)(qa,(function(e){e.addCase(Zt,(function(e,t){e.currentComments.data=t.payload.currentComments})).addCase(Kt,(function(e,t){e.currentComments.status=t.payload.status})).addCase(Xt,(function(e,t){e.newComment.status=t.payload.status}))})),Ja=d,Za=Object(Pe.c)(Ja,(function(e){e.addCase(Wt,(function(e,t){return t.payload.filter}))})),Ka=Object(Ha.c)({films:Wa,comments:Va,filter:Za,authorization:Ya}),Xa=function(e){var t=za.a.create({baseURL:"https://8.react.pages.academy/wtw",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return 401===(null===a||void 0===a?void 0:a.status)&&"function"===typeof e&&e(),Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(m);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){$a.dispatch(Re(F))})),$a=Object(Pe.a)({reducer:Ka,middleware:function(e){return e({serializableCheck:!1,thunk:{extraArgument:Xa}}).concat(Ga)}});$a.dispatch(function(){var e=Object(we.a)(ye.a.mark((function e(t,a,c){var n,r,s;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get(re());case 3:n=e.sent,r=n.data,s=Ie(r),t(Ge(s)),t(Re(k)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Ae(),t(Re(F));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,c){return e.apply(this,arguments)}}()),s.a.render(Object(fe.jsx)(n.a.StrictMode,{children:Object(fe.jsxs)(i.a,{store:$a,children:[Object(fe.jsx)(o.c,{history:La,children:Object(fe.jsx)(Aa,{})}),Object(fe.jsx)(ke.a,{position:"top-right"})]})}),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.68b6a380.chunk.js.map